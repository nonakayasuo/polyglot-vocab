{
  "master": {
    "tasks": [
      {
        "id": 1,
        "title": "言語別ページのルーティング実装",
        "description": "各言語（English, Spanish, Korean, Chinese）を別ページに分離するためのルーティング構造を実装する",
        "details": "Next.js App Routerを使用して /[language]/ の動的ルーティングを実装。各言語ページで単語一覧、フラッシュカード、統計を表示できるようにする。ホームページは言語選択のダッシュボードとして再設計する。",
        "testStrategy": "",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 2,
        "title": "言語選択ダッシュボード（ホームページ）の作成",
        "description": "ホームページを言語選択のダッシュボードとして再設計し、各言語の統計情報を表示する",
        "details": "各言語カードに単語数、習得率、最近の学習状況を表示。言語カードをクリックすると該当の言語ページへ遷移。全体の統計サマリーも表示。",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          1
        ],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 3,
        "title": "言語別ストレージ関数の最適化",
        "description": "言語別にデータを効率的に取得・保存できるようにストレージ関数を拡張する",
        "details": "getVocabularyByLanguage(language)関数の追加。言語別の統計取得関数getStatsByLanguage(language)の追加。キャッシュの最適化。",
        "testStrategy": "",
        "status": "done",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 4,
        "title": "言語ページ共通コンポーネントの作成",
        "description": "言語別ページで再利用可能な共通コンポーネントを作成する",
        "details": "LanguagePageLayoutコンポーネント、言語ヘッダー、言語固有の設定（TTS言語コードなど）を管理するコンテキストの作成。",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [
          1
        ],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 5,
        "title": "WordFormのopen prop問題の修正",
        "description": "WordFormコンポーネントのDialogがopen propを要求しているが、page.tsxでは条件付きレンダリングしている不整合を修正",
        "details": "page.tsxでのWordFormの呼び出し方法を修正し、open propを正しく渡すようにする。またはWordFormの実装を条件付きレンダリングに対応させる。",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 6,
        "title": "新言語の追加機能",
        "description": "ユーザーが新しい言語を追加できる機能を実装する",
        "details": "設定画面で新しい言語（言語コード、表示名、国旗絵文字、TTS言語コード）を追加・編集・削除できるようにする。カスタム言語をLocalStorageに保存。",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "low",
        "subtasks": []
      },
      {
        "id": 7,
        "title": "ダークモード/ライトモード切り替え機能",
        "description": "ダークモードとライトモードを切り替えられる機能を追加する",
        "details": "現在はダークモードのみ。next-themesを使用してテーマ切り替えを実装。システム設定に従うオプションも追加。",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "low",
        "subtasks": []
      },
      {
        "id": 8,
        "title": "PWA対応（オフライン機能）",
        "description": "Progressive Web App対応を行い、オフラインでも利用可能にする",
        "details": "Service Workerの設定、マニフェストファイルの作成、オフラインキャッシュ戦略の実装。モバイルでのホーム画面追加対応。",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "low",
        "subtasks": []
      },
      {
        "id": 9,
        "title": "Notion風UIデザインの実装",
        "description": "NotionのようなクリーンなライトテーマのテーブルUI、カラフルな品詞バッジ、進捗フィルタータブを実装",
        "details": "品詞ごとのカラーバッジ（名詞=水色、動詞=オレンジなど）、例文内の単語ハイライト、進捗フィルター（All, □□□, ■□□, ■■□, ■■■）、白背景のクリーンなデザイン",
        "testStrategy": "",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 10,
        "title": "SQLite + Prismaによるデータベース実装",
        "description": "LocalStorageからSQLite + Prismaへのデータ永続化層の移行",
        "details": "Prismaのセットアップ、スキーマ定義（VocabularyWord, Language）、マイグレーション実行、APIルートの作成、既存のストレージ関数をDB操作に置き換え",
        "testStrategy": "",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 11,
        "title": "本番環境用データベース設定（Turso/LibSQL）",
        "description": "Vercelサーバーレス環境で使用するための本番用データベースを設定する",
        "details": "SQLiteはVercelのサーバーレス環境では永続化できないため、Turso（LibSQL）などのエッジ対応DBサービスへ移行する。\n\n必要な作業：\n1. Tursoアカウント作成とデータベース作成\n2. @libsql/clientのインストール\n3. Prismaアダプターの設定変更\n4. 環境変数（TURSO_DATABASE_URL, TURSO_AUTH_TOKEN）の設定\n5. マイグレーションの実行\n6. 既存データの移行（必要に応じて）",
        "testStrategy": "本番環境でCRUD操作が正常に動作することを確認",
        "status": "pending",
        "dependencies": [
          10
        ],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 12,
        "title": "アプリのブランディングとメタデータ設定",
        "description": "「野中やすおの単語帳」としてブランディングし、適切なメタデータを設定する",
        "details": "アプリ名とメタデータの設定：\n1. layout.tsxのmetadata設定（title: 野中やすおの単語帳, description, keywords）\n2. ファビコンの作成と設定（favicon.ico: 16x16, 32x32）\n3. apple-touch-icon.png（180x180）\n4. Open Graph画像の作成（1200x630）\n5. Twitter Card設定\n6. PWAマニフェストの更新（アプリ名、アイコン各サイズ）\n\nデザイン：シンプルで学習をイメージさせるアイコン（本、言語、脳などのモチーフ）",
        "testStrategy": "OGPデバッガーでメタデータが正しく表示されることを確認",
        "status": "pending",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 13,
        "title": "Vercelデプロイとnonakayasuo.comドメイン設定",
        "description": "本番環境へのデプロイとカスタムドメインの設定を行う",
        "details": "Vercelへのデプロイ設定：\n1. Vercelアカウントとプロジェクト連携（GitHub連携推奨）\n2. 本番環境用の環境変数設定（DATABASE_URL, TURSO_AUTH_TOKENなど）\n3. ビルド設定の確認\n\nドメイン設定：\n1. nonakayasuo.comのDNSレコード設定\n   - CNAME: cname.vercel-dns.com（またはAレコード）\n2. Vercelダッシュボードでカスタムドメイン追加\n3. SSL証明書の自動発行確認\n4. www.nonakayasuo.comのリダイレクト設定（オプション）",
        "testStrategy": "nonakayasuo.comでアプリが正常に表示され、HTTPS接続できることを確認",
        "status": "pending",
        "dependencies": [
          11,
          12
        ],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 14,
        "title": "SEO対策の実装",
        "description": "検索エンジン最適化のための各種設定を行う",
        "details": "SEO設定：\n1. robots.txtの作成（/public/robots.txt）\n2. sitemap.xmlの生成（next-sitemapパッケージ推奨）\n3. 各ページの適切なメタタグ設定\n4. canonicalタグの設定\n5. 言語ページのhreflang設定（多言語対応）\n6. 構造化データ（JSON-LD）の追加（オプション）\n\n言語ページ用のメタ情報：\n- /english: English Vocabulary\n- /korean: 韓国語単語帳\n- /chinese: 中国語単語帳\n- /spanish: Spanish Vocabulary",
        "testStrategy": "Google Search Consoleでインデックス状況を確認、Lighthouse SEOスコア90以上",
        "status": "pending",
        "dependencies": [
          13
        ],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 15,
        "title": "アクセス解析ツールの導入",
        "description": "ユーザー行動分析のためのアクセス解析ツールを導入する",
        "details": "アクセス解析の設定：\n1. Google Analytics 4（GA4）の設定\n   - GA4プロパティ作成\n   - 測定IDの取得\n   - next/script での読み込み実装\n2. Vercel Analyticsの有効化（オプション、Vercelダッシュボードから）\n3. イベントトラッキング設定：\n   - 単語追加イベント\n   - フラッシュカード学習開始/完了\n   - 言語ページ閲覧\n4. プライバシー配慮（Cookie同意バナーの検討）",
        "testStrategy": "GA4リアルタイムレポートでイベントが計測されることを確認",
        "status": "pending",
        "dependencies": [
          13
        ],
        "priority": "low",
        "subtasks": []
      },
      {
        "id": 16,
        "title": "VocabularyTableのドラッグ＆ドロップ パフォーマンス改善",
        "description": "VocabularyTableコンポーネントのドラッグ＆ドロップ（並び替え）機能のパフォーマンスを改善する",
        "details": "現在@dnd-kitを使用しているが、ドラッグ操作が遅い・反応が悪い問題がある。\n\n検討すべき改善策：\n1. 仮想化（react-virtual/tanstack-virtual）の導入で大量の行でもスムーズに動作させる\n2. ドラッグ中の再レンダリングを最小限に抑える\n3. DragOverlayの最適化\n4. センサー設定の調整\n5. 必要に応じて別のドラッグライブラリ（react-beautiful-dnd、pragmatic-drag-and-drop等）への移行を検討\n\n現在の実装：\n- @dnd-kit/core, @dnd-kit/sortable を使用\n- PointerSensor（distance: 3）とKeyboardSensorを使用\n- restrictToVerticalAxisモディファイアを使用",
        "testStrategy": "50件以上の単語でスムーズにドラッグ＆ドロップできることを確認",
        "status": "pending",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      }
    ],
    "metadata": {
      "created": "2025-12-20T09:20:41.573Z",
      "description": "Default tasks context",
      "updated": "2025-12-20T09:56:00.859Z"
    }
  },
  "feature-news-integration": {
    "tasks": [
      {
        "id": 1,
        "title": "News API統合基盤の構築",
        "description": "News API (newsapi.org) との連携基盤を構築。APIキー管理、レート制限対応、エラーハンドリングを含む。",
        "details": "- News APIアカウント作成とAPIキー取得\\n- 環境変数でAPIキー管理\\n- APIクライアントモジュール作成 (src/lib/news-api.ts)\\n- レート制限対応（キャッシュ戦略）\\n- エラーハンドリング\\n- 記事取得関数の実装",
        "testStrategy": "",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 2,
        "title": "データベーススキーマ拡張",
        "description": "ニュース記事と読書履歴を保存するためのPrismaスキーマを拡張する",
        "details": "- Article モデル追加（id, title, description, content, url, source, publishedAt, imageUrl, language）\\n- ReadingHistory モデル追加（userId, articleId, readAt, wordsLearned）\\n- WordContext モデル追加（単語と記事の関連、コンテキスト文）\\n- マイグレーション実行",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          1
        ],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 3,
        "title": "ニュース記事API Routes作成",
        "description": "記事の取得・キャッシュ・検索のためのAPI Routesを作成",
        "details": "- GET /api/news - 記事一覧取得（カテゴリ、言語フィルター）\\n- GET /api/news/[id] - 記事詳細取得\\n- GET /api/news/sources - 利用可能なソース一覧\\n- キャッシュ戦略（Redis or SQLite）\\n- ページネーション対応",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          1,
          2
        ],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 4,
        "title": "ニュース一覧ページUI",
        "description": "/news ページで記事一覧を表示するUIを作成",
        "details": "- カード形式の記事一覧表示\\n- カテゴリフィルター（政治、経済、テクノロジー等）\\n- ソースフィルター（NYT、BBC、Guardian等）\\n- 言語フィルター\\n- 無限スクロールまたはページネーション\\n- ローディング状態・エラー状態",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          3
        ],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 5,
        "title": "記事詳細リーダービュー",
        "description": "記事を読むためのリーダービューを作成。単語のハイライトとインタラクション対応",
        "details": "- 記事タイトル、画像、本文の表示\\n- 読みやすいタイポグラフィ\\n- ダークモード対応\\n- 単語をクリック可能にする準備\\n- ソースへのリンク\\n- 読書進捗インジケーター",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          4
        ],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 6,
        "title": "単語クリック＆辞書ポップオーバー",
        "description": "記事内の単語をクリックすると辞書APIから意味を取得してポップオーバー表示",
        "details": "- 単語クリックイベントのハンドリング\\n- Free Dictionary APIまたはWordnik API連携\\n- ポップオーバーコンポーネント（意味、発音、品詞）\\n- 発音記号と音声再生ボタン\\n- 「単語帳に追加」ボタン",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          5
        ],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 7,
        "title": "記事から単語帳への追加機能",
        "description": "ポップオーバーから1クリックで単語を単語帳に追加。記事のコンテキストを例文として保存",
        "details": "- 単語追加API呼び出し\\n- 記事の文（前後の文脈）を例文として保存\\n- 出典（ソース）を自動設定\\n- 追加成功のフィードバックアニメーション\\n- 既に登録済みの場合の表示",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          6
        ],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 8,
        "title": "記事の難易度分析",
        "description": "記事内の単語を分析し、ユーザーの既知語彙に基づいて難易度を計算",
        "details": "- 記事をトークン化（単語分割）\\n- ユーザーの単語帳と照合\\n- 未知語の割合を計算\\n- 難易度スコア表示（初級/中級/上級）\\n- 未知語のハイライト表示オプション",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          5
        ],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 9,
        "title": "読書履歴＆統計ダッシュボード",
        "description": "読んだ記事数、学習した単語数、連続学習日数などの統計を表示",
        "details": "- 読書履歴の保存（記事閲覧時）\\n- 日別/週別/月別の統計\\n- 読んだ記事数、学習単語数\\n- 連続学習日数（ストリーク）\\n- グラフ表示（recharts使用）",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          7
        ],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 10,
        "title": "記事ベースフラッシュカード",
        "description": "読んだ記事から抽出した単語でフラッシュカードを生成し、記事のコンテキストで学習",
        "details": "- 記事から追加した単語を抽出\\n- 記事のコンテキスト（前後の文）を表示\\n- 記事リンク付きのフラッシュカード\\n- 「この記事で学んだ単語」フィルター",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          7
        ],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 11,
        "title": "記事の音声読み上げ機能",
        "description": "記事テキストをTTSで読み上げ、リスニング練習をサポート",
        "details": "- Web Speech API活用\\n- 段落ごとの読み上げ\\n- 再生/一時停止/停止ボタン\\n- 読み上げ速度調整\\n- 読み上げ中の単語ハイライト",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          5
        ],
        "priority": "low",
        "subtasks": []
      },
      {
        "id": 12,
        "title": "おすすめ記事機能",
        "description": "ユーザーの語彙レベルと興味に基づいて適切な難易度の記事をおすすめ",
        "details": "- 難易度スコアに基づくフィルタリング\\n- カテゴリ別おすすめ\\n- 「あなたにおすすめ」セクション\\n- 学習効果の高い記事を優先表示",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          8
        ],
        "priority": "low",
        "subtasks": []
      },
      {
        "id": 13,
        "title": "日次単語レコメンド機能",
        "description": "ニュース記事から高度かつ頻出の未学習単語を自動抽出し、日次で単語帳に追加をレコメンド",
        "details": "【機能概要】\n- 毎日のニュース記事を分析\n- 単語の難易度スコア（CEFR B2-C2レベル）を判定\n- 複数記事での出現頻度をカウント\n- ユーザーの単語帳にない単語のみを抽出\n- 「今日のおすすめ単語」として5-10語を提案\n\n【技術要件】\n- 単語頻度データベース（COCA、BNCなど）との照合\n- 難易度判定API（Wordnik、datamuse等）\n- 日次バッチ処理（cron or Vercel Cron）\n- 「今日の単語」ダッシュボードウィジェット\n- ワンクリックで単語帳に追加\n- 記事のコンテキスト（例文）を自動付与\n- プッシュ通知（オプション）\n\n【対象レベル】\n- B2（英検準1級相当）〜 C2（ネイティブレベル）\n- ユーザー設定で範囲を調整可能\n\n【UI】\n- ホームページに「今日のおすすめ単語」セクション\n- 単語カード形式で表示（意味、例文、出現記事、CEFRレベル）\n- 「すべて追加」「スキップ」ボタン\n- レベルフィルター（B2のみ/C1以上/全て）",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          7,
          8
        ],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 14,
        "title": "単語難易度・頻度データベース構築",
        "description": "単語の難易度（CEFRレベル B2-C2）と頻度ランクを判定するためのデータソースを構築",
        "details": "【データソース候補】\n- CEFR単語リスト（A1-C2レベル分類）\n- COCA（Corpus of Contemporary American English）頻度リスト\n- Academic Word List (AWL) - 学術単語\n- NGSL（New General Service List）- 基本2800語\n\n【実装】\n- 単語レベルJSONデータベース作成\n- 頻度ランク（1-20000位等）の付与\n- API: /api/words/analyze - 単語の難易度・頻度を返す\n- フィルター設定画面: 「B2のみ」「C1以上」「C2含む」など\n\n【判定ロジック】\n- 頻度上位3000語 = 基礎語彙（除外オプション）\n- 頻度3000-20000位 + CEFR B2-C2 = 推薦対象\n- C2レベル = ネイティブレベルの高度な語彙も含む\n- 学術用語（AWL）= 優先推薦\n\n【レベル対応表】\n- B2 ≒ 英検準1級（~8,000語）\n- C1 ≒ 英検1級（~12,000語）\n- C2 ≒ ネイティブレベル（~16,000語+）\n\n【ユーザー設定】\n- デフォルト: B2-C2（全レベル）\n- 設定画面でレベル範囲を調整可能",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          1
        ],
        "priority": "high",
        "subtasks": []
      }
    ],
    "metadata": {
      "created": "2025-12-25T16:33:23.982Z",
      "updated": "2025-12-26T01:59:06.460Z",
      "description": "ニュースAPI連携機能の開発タスク"
    }
  }
}